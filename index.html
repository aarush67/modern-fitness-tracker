<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Fitness Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js"></script>
</head>
<body>
    <div id="signInSection">
        <h2>Sign In</h2>
        <button id="googleSignInBtn">Sign in with Google</button>
        <button id="emailSignInBtn">Sign in with Email</button>
        <button id="emailSignUpBtn">Sign Up</button>
    </div>
    
    <div id="dashboardSection" style="display:none;">
        <h2>Dashboard</h2>
        <button id="signOutBtn">Sign Out</button>
        <form id="fitnessForm">
            <label for="sleep">Sleep (hours):</label>
            <input type="number" id="sleep" required>
            <label for="caloriesBurned">Calories Burned:</label>
            <input type="number" id="caloriesBurned" required>
            <button type="submit">Submit</button>
        </form>
        <canvas id="fitnessChart"></canvas>
    </div>

    <script type="module">
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Event Listener for DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Document loaded. Adding event listeners...");

            // Event listener for email sign-up
            document.getElementById('emailSignUpBtn').addEventListener('click', function() {
                console.log("Sign Up button clicked.");
                var email = prompt("Enter your email:");
                var password = prompt("Enter your password:");

                if (email && password) {
                    // Firebase Email Sign Up
                    auth.createUserWithEmailAndPassword(email, password)
                        .then(function(userCredential) {
                            console.log("User signed up:", userCredential.user);
                            alert("Sign up successful! Welcome, " + userCredential.user.email);
                            loadDashboard();
                        })
                        .catch(function(error) {
                            console.error("Error during sign-up:", error);
                            alert("Error: " + error.message);
                        });
                } else {
                    alert("Please enter a valid email and password.");
                }
            });

            // Event listener for signing in
            document.getElementById('emailSignInBtn').addEventListener('click', function() {
                console.log("Email Sign In button clicked.");
                var email = prompt("Enter your email:");
                var password = prompt("Enter your password:");

                if (email && password) {
                    auth.signInWithEmailAndPassword(email, password)
                        .then(function(userCredential) {
                            console.log("User signed in:", userCredential.user);
                            loadDashboard();
                        })
                        .catch(function(error) {
                            console.error("Error during sign-in:", error);
                            alert("Error: " + error.message);
                        });
                } else {
                    alert("Please enter a valid email and password.");
                }
            });

            // Sign out button event listener
            document.getElementById('signOutBtn').addEventListener('click', function() {
                console.log("Sign Out button clicked.");
                auth.signOut().then(function() {
                    console.log("User signed out.");
                    document.getElementById('dashboardSection').style.display = 'none';
                    document.getElementById('signInSection').style.display = 'block';
                }).catch(function(error) {
                    console.error("Sign out error:", error);
                });
            });

            // Handle form submission
            document.getElementById('fitnessForm').addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent form submission
                const sleepHours = document.getElementById('sleep').value;
                const caloriesBurned = document.getElementById('caloriesBurned').value;
                console.log(`Sleep: ${sleepHours}, Calories Burned: ${caloriesBurned}`);
                // Optionally, you could add this data to a chart or save it to a database
            });
        });

        // Function to load the dashboard
        function loadDashboard() {
            console.log("Loading dashboard...");
            document.getElementById('signInSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'block';
        }
    </script>
</body>
</html>
